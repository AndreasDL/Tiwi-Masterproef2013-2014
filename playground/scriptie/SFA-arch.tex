\chapter{SFA-Architectuur}

{\samenvatting Deze masterproef zal als onderdeel van FIRE, een Europees onderzoeksproject naar een innovatief internet, een monitoringsservice maken met een bijhorende API. FIRE gebruikt voor zijn testbedden de SFA architectuur. Deze architectuur is ontwikkeld om de configuratie en aansturing van testbeds over de hele wereld gelijk te maken. Hierdoor moeten onderzoekers maar een configuratie leren, waarmee ze vervolgens op elk testbed kunnen werken. Dit hoofdstuk gaat dieper in op de SFA-architectuur. Hierbij worden de relevante kern begrippen besproken.}

\section{Doel}
\npar
SFA (Slice-based Federation architecture)\nomenclature{SFA}{Slice-based Federation Architecture} is een framework dat gebruikt wordt om testbeds aan te sturen\citep{SFA-overview}. SFA wordt gebruikt om een van de FIRE doelstellingen, het delen van testbeds makkelijker maken, waar te maken. Doordat alle testbeds op een andere manier werkten, was het voor een onderzoeker moeilijk om verschillende testbeds te gebruiken. Een onderzoeker moest eerst kennis maken met de specifieke configuratie van een testbed, alvorens hij ermee kan werken. Hierdoor kwam de noodzaak om de configuratie van testbeds gelijk te trekken.
\clearpage
\npar
SFA is een controle framework om testbeds mee aan te sturen. Het idee is dat SFA een standaard is. Testbeds zullen vervolgens zorgen voor compabiliteit met SFA. Eenmaal dat is gebeurd kan een onderzoeker die met SFA kan werken, direct ook werken met alle testbeds die er compatibel mee zijn. Zoals te zien is in Figuur \ref{customerservice} komt de onderzoeker de klant en het testbed is de service provider.
\mijnfiguur{width=0.9\textwidth}{customerservice}{De onderzoeker (boven) is de klant, de testbeds (onderhouden door onderste personen) is de service provice. Fed4FIRE voorziet de link tussen beide partijen.}
\npar
SFA voorziet een aantal functionaliteiten. De eerste is voorzien dat het beleid van de owner nageleefd wordt. SFA voorziet in mechanismen om dit te controleren, waarbij verondersteld wordt dat er meerder eigenaars zijn. Deze eigenaars hebben elk een testfaciliteit en vormen samen een federatie. Het beleid is vastgelegd binnen een federatie of verzameling testbeds.
\npar
SFA moet ook voorzien dat operators onderhoud kunnen uitvoeren, hiervoor moet het mogelijk zijn om machines te verwijderen of te vervangen. Ook toevoegen van nieuwe machines moet mogelijk zijn. Daarnaast moeten onderzoekers de mogelijkheid krijgen om slices aan te maken. Een slice is een container waarin een experiment draait. Verder moet het mogelijk zijn voor eigenaars om de autorisatie te controleren. Hierbij is het bijvoorbeeld mogelijk om maar een beperkt aantal mensen toegang te verlenen.
\clearpage
\section{Entiteiten}
\npar
SFA herkent 4 entiteiten.
\begin{enumerate}
\item Owners
\item Operators
\item Researchers
\item Identity anchors / identity providers
\end{enumerate}
Wat hierop volgt is een bespreking van elke entiteit met zijn verantwoordelijkheden.

\subsection{Owners}
\npar
De eigenaars of verantwoordelijke voor het testbed. De eigenaar is verantwoordelijk voor de werking van zijn (deel van) het testbed. De Owners bepalen welke beleidsregels er van toepassing zijn. Deze beleidsregels worden aangeduid met SLA (Service Level Agreements)\nomenclature{SLA}{Service Level Agreements}. Zo kan het zijn dat de eigenaar van een testbed niet wil dat er commerciÃ«le testen gebeuren zonder dat hij daarvan op de hoogte is. Figuur \ref{policies} geeft een voorbeeld van een aantal mogelijke beleidsregels.
\mijnfiguur{width=0.9\textwidth}{policies}{Eigenaars bepalen het beleid van hun testbed.}

\subsection{Operators}
\npar
Operators voorzien het onderhoud van het testbed. Dit onderhoud omvat o.a. herstellingswerken, beveiliging, voorkomen van schadelijke activiteiten.

\subsection{Researchers}
\npar
De Onderzoekers is de klant, hij gebruikt een testbed om experimenten uit te voeren. Deze experimenten verlopen in kader van zijn onderzoek.

\subsection{Identity providers}
\npar
Een identity provider of identity anchor is iemand die entiteiten rechten kan geven. Zo kan een identity provider een hoofdonderzoeker rechten geven om onderzoekers binnen zijn project te laten werken.

\section{Opbouw}
Een testbed is opgebouwd uit meerdere onderdelen die opgedeeld kunnen worden in meerdere lagen. Volgende tekst bespreekt deze onderdelen.
\subsection{Component}
\npar
Een testbed bestaat uit vele onderdelen. Een primaire bouwblok van een testbed is een component. Een component is bijvoorbeeld een computer, router of programmeerbaar access point. Indien de component een computer is, wordt deze ook een node genoemd. Een node is dus een computer , meestal binnen een testbed, verbonden met het netwerk. 
\subsection{Aggregate}
\npar
Al deze componenten worden gegroepeerd in aggregates of aggregaten. Een aggregaat is een verzameling componenten die onder eenzelfde beheerde valt. Zo is de virtual wall2 van iMinds een aggregaat omdat het beheer van dit volledige testbed onder iMinds valt.
\clearpage
\subsection{Aggregate manager}
\npar
Elke aggregate wordt beheerd door een AM (aggregate manager). De aggregate manager is een stuk software dat een interface aanbied waarmee onderzoekers slices kunnen aanmaken op een testbed. Een aggregate manager vervult taken zoals 'stukken van het testbed', slices, toe te wijzen aan onderzoekers of een experiment.
\subsection{Sliver}
\npar
Een component kan echter ook gemultiplexed worden zodat er meerdere experimenten tegelijk op kunnen draaien. Dit kan door bijvoorbeeld virtualisatie toe te passen. Het 'stuk' van een component wordt een sliver genoemd.
\subsection{Slice}
\npar
Een slice is een verzameling van slivers. Een slice is een abstract begrip dat omschreven kan worden als een container waarin een experiment draait. Vanuit het perspectief van de onderzoeker komt dit overeen met de testopstelling die hij ter beschikking heeft. Vanuit het perspectief van de owner of eigenaar van het testbed is dit een administratieve opdeling om bij te houden welke testen er waar gebeuren. Figuur \ref{slice} geeft een voorbeeld van een slice. Merk op dat een slice over meerdere aggregates heen kan lopen.
\mijnfiguur{width=0.9\textwidth}{slice}{Een slice (geel) bestaat uit een verzamling slivers (groen).}
\clearpage
\section{RSpec}
\npar
Een RSpec (Resource Specification) \nomenclature{RSpec}{Resource Specification}, is een xml file die een proefopstelling beschrijft\citep{geni-RSpec}. 
RSpecs kunnen opgedeeld worden in 3 groepn. De eerste soort is een request RSpec, deze beschrijft welke resources een onderzoeker wil gebruiken in zijn experiment. De AM (aggregate manager) antwoordt hierop met een manifest RSpec, zoals beschreven in Figuur \ref{RSpec} . Deze RSpec beschrijft de resources die gealloceerd zijn voor het experiment. Merk op dat dit proces transparant gebeurd, de meeste jFed tools zullen automatisch een RSpec genereren. Toch is het mogelijk om RSpecs te gebruiken, dit wordt vooral gedaan om complexere functies aan te roepen.
\mijnfiguur{width=0.9\textwidth}{RSpec}{Een onderzoeker, of de tool die hij gebruikt stuurt eerst een request RSpec en krijgt vervolgens een manifest RSpec terug.}
\clearpage
\npar
De derde soort RSpec, de advertisement RSpec, wordt gebruikt bij de listResourcetest. De listResourcetest komt later in de scriptie aan bod. Een advertisement RSpec lijst alle resources op die beschikbaar zijn op een testbed.
\npar
Voor een onderzoeker is een RSpec een beschrijving van een experiment. Het voordeel van dit formaat in plain tekst is dat onderzoekers zeer eenvoudig experimenten kunnen herhalen. Doordat een RSpec een volledige beschrijving is van een proefopstelling, is dit een meerwaarde in wetenschappelijke verslagen.
